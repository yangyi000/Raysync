(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Raysync=e()}})(function(){var i,e,t;return function(){function h(o,s,a){function f(r,e){if(!s[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};o[r][0].call(i.exports,function(e){var t=o[r][1][e];return f(t||e)},i,i.exports,h,o,s,a)}return s[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)f(a[e]);return f}return h}()({1:[function(e,t,r){"use strict";r.byteLength=s;r.toByteArray=a;r.fromByteArray=d;var f=[];var u=[];var h=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,o=n.length;i<o;++i){f[i]=n[i];u[n.charCodeAt(i)]=i}u["-".charCodeAt(0)]=62;u["_".charCodeAt(0)]=63;function l(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function s(e){var t=l(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function c(e,t,r){return(t+r)*3/4-r}function a(e){var t;var r=l(e);var n=r[0];var i=r[1];var o=new h(c(e,n,i));var s=0;var a=i>0?n-4:n;for(var f=0;f<a;f+=4){t=u[e.charCodeAt(f)]<<18|u[e.charCodeAt(f+1)]<<12|u[e.charCodeAt(f+2)]<<6|u[e.charCodeAt(f+3)];o[s++]=t>>16&255;o[s++]=t>>8&255;o[s++]=t&255}if(i===2){t=u[e.charCodeAt(f)]<<2|u[e.charCodeAt(f+1)]>>4;o[s++]=t&255}if(i===1){t=u[e.charCodeAt(f)]<<10|u[e.charCodeAt(f+1)]<<4|u[e.charCodeAt(f+2)]>>2;o[s++]=t>>8&255;o[s++]=t&255}return o}function p(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[e&63]}function g(e,t,r){var n;var i=[];for(var o=t;o<r;o+=3){n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255);i.push(p(n))}return i.join("")}function d(e){var t;var r=e.length;var n=r%3;var i=[];var o=16383;for(var s=0,a=r-n;s<a;s+=o){i.push(g(e,s,s+o>a?a:s+o))}if(n===1){t=e[r-1];i.push(f[t>>2]+f[t<<4&63]+"==")}else if(n===2){t=(e[r-2]<<8)+e[r-1];i.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")}return i.join("")}},{}],2:[function(e,t,n){"use strict";var i=e("base64-js");var o=e("ieee754");n.Buffer=c;n.SlowBuffer=E;n.INSPECT_MAX_BYTES=50;var r=2147483647;n.kMaxLength=r;c.TYPED_ARRAY_SUPPORT=s();if(!c.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function s(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(c.prototype,"parent",{get:function(){if(!(this instanceof c)){return undefined}return this.buffer}});Object.defineProperty(c.prototype,"offset",{get:function(){if(!(this instanceof c)){return undefined}return this.byteOffset}});function a(e){if(e>r){throw new RangeError("Invalid typed array length")}var t=new Uint8Array(e);t.__proto__=c.prototype;return t}function c(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return l(e)}return f(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species&&c[Symbol.species]===c){Object.defineProperty(c,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}c.poolSize=8192;function f(e,t,r){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number')}if(Q(e)||e&&Q(e.buffer)){return d(e,t,r)}if(typeof e==="string"){return p(e,t)}return v(e)}c.from=function(e,t,r){return f(e,t,r)};c.prototype.__proto__=Uint8Array.prototype;c.__proto__=Uint8Array;function u(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function h(e,t,r){u(e);if(e<=0){return a(e)}if(t!==undefined){return typeof r==="string"?a(e).fill(t,r):a(e).fill(t)}return a(e)}c.alloc=function(e,t,r){return h(e,t,r)};function l(e){u(e);return a(e<0?0:y(e)|0)}c.allocUnsafe=function(e){return l(e)};c.allocUnsafeSlow=function(e){return l(e)};function p(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!c.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=S(e,t)|0;var n=a(r);var i=n.write(e,t);if(i!==r){n=n.slice(0,i)}return n}function g(e){var t=e.length<0?0:y(e.length)|0;var r=a(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function d(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=c.prototype;return n}function v(e){if(c.isBuffer(e)){var t=y(e.length)|0;var r=a(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e){if(ArrayBuffer.isView(e)||"length"in e){if(typeof e.length!=="number"||Z(e.length)){return a(0)}return g(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return g(e.data)}}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function y(e){if(e>=r){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r.toString(16)+" bytes")}return e|0}function E(e){if(+e!=e){e=0}return c.alloc(+e)}c.isBuffer=function e(t){return t!=null&&t._isBuffer===true};c.compare=function e(t,r){if(!c.isBuffer(t)||!c.isBuffer(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var o=0,s=Math.min(n,i);o<s;++o){if(t[o]!==r[o]){n=t[o];i=r[o];break}}if(n<i)return-1;if(i<n)return 1;return 0};c.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};c.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return c.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=c.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var s=t[n];if(ArrayBuffer.isView(s)){s=c.from(s)}if(!c.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers')}s.copy(i,o);o+=s.length}return i};function S(e,t){if(c.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||Q(e)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return Y(e).length;t=(""+t).toLowerCase();n=true}}}c.byteLength=S;function w(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return L(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return W(this,t,r);case"base64":return m(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}c.prototype._isBuffer=true;function T(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}c.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){T(this,r,r+1)}return this};c.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){T(this,r,r+3);T(this,r+1,r+2)}return this};c.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){T(this,r,r+7);T(this,r+1,r+6);T(this,r+2,r+5);T(this,r+3,r+4)}return this};c.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return L(this,0,t);return w.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function e(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return c.compare(this,t)===0};c.prototype.inspect=function e(){var t="";var r=n.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};c.prototype.compare=function e(t,r,n,i,o){if(!c.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(o===undefined){o=this.length}if(r<0||n>t.length||i<0||o>this.length){throw new RangeError("out of range index")}if(i>=o&&r>=n){return 0}if(i>=o){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===t)return 0;var s=o-i;var a=n-r;var f=Math.min(s,a);var u=this.slice(i,o);var h=t.slice(r,n);for(var l=0;l<f;++l){if(u[l]!==h[l]){s=u[l];a=h[l];break}}if(s<a)return-1;if(a<s)return 1;return 0};function b(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(Z(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=c.from(t,n)}if(c.isBuffer(t)){if(t.length===0){return-1}return R(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return R(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function R(e,t,r,n,i){var o=1;var s=e.length;var a=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}o=2;s/=2;a/=2;r/=2}}function f(e,t){if(o===1){return e[t]}else{return e.readUInt16BE(t*o)}}var u;if(i){var h=-1;for(u=r;u<s;u++){if(f(e,u)===f(t,h===-1?0:u-h)){if(h===-1)h=u;if(u-h+1===a)return h*o}else{if(h!==-1)u-=u-h;h=-1}}}else{if(r+a>s)r=s-a;for(u=r;u>=0;u--){var l=true;for(var c=0;c<a;c++){if(f(e,u+c)!==f(t,c)){l=false;break}}if(l)return u}}return-1}c.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};c.prototype.indexOf=function e(t,r,n){return b(this,t,r,n,true)};c.prototype.lastIndexOf=function e(t,r,n){return b(this,t,r,n,false)};function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var o=t.length;if(n>o/2){n=o/2}for(var s=0;s<n;++s){var a=parseInt(t.substr(s*2,2),16);if(Z(a))return s;e[r+s]=a}return s}function O(e,t,r,n){return z(Y(t,e.length-r),e,r,n)}function A(e,t,r,n){return z(j(t),e,r,n)}function N(e,t,r,n){return A(e,t,r,n)}function I(e,t,r,n){return z(q(t),e,r,n)}function C(e,t,r,n){return z(J(t,e.length-r),e,r,n)}c.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-r;if(n===undefined||n>o)n=o;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var s=false;for(;;){switch(i){case"hex":return _(this,t,r,n);case"utf8":case"utf-8":return O(this,t,r,n);case"ascii":return A(this,t,r,n);case"latin1":case"binary":return N(this,t,r,n);case"base64":return I(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true}}};c.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(e,t,r){if(t===0&&r===e.length){return i.fromByteArray(e)}else{return i.fromByteArray(e.slice(t,r))}}function L(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var o=e[i];var s=null;var a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var f,u,h,l;switch(a){case 1:if(o<128){s=o}break;case 2:f=e[i+1];if((f&192)===128){l=(o&31)<<6|f&63;if(l>127){s=l}}break;case 3:f=e[i+1];u=e[i+2];if((f&192)===128&&(u&192)===128){l=(o&15)<<12|(f&63)<<6|u&63;if(l>2047&&(l<55296||l>57343)){s=l}}break;case 4:f=e[i+1];u=e[i+2];h=e[i+3];if((f&192)===128&&(u&192)===128&&(h&192)===128){l=(o&15)<<18|(f&63)<<12|(u&63)<<6|h&63;if(l>65535&&l<1114112){s=l}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=a}return P(n)}var U=4096;function P(e){var t=e.length;if(t<=U){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=U))}return r}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function W(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function M(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var o=t;o<r;++o){i+=X(e[o])}return i}function B(e,t,r){var n=e.slice(t,r);var i="";for(var o=0;o<n.length;o+=2){i+=String.fromCharCode(n[o]+n[o+1]*256)}return i}c.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i=this.subarray(t,r);i.__proto__=c.prototype;return i};function k(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)k(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o}return i};c.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){k(t,r,this.length)}var i=this[t+--r];var o=1;while(r>0&&(o*=256)){i+=this[t+--r]*o}return i};c.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)k(t,1,this.length);return this[t]};c.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)k(t,2,this.length);return this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)k(t,2,this.length);return this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};c.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)k(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o}o*=128;if(i>=o)i-=Math.pow(2,8*r);return i};c.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)k(t,r,this.length);var i=r;var o=1;var s=this[t+--i];while(i>0&&(o*=256)){s+=this[t+--i]*o}o*=128;if(s>=o)s-=Math.pow(2,8*r);return s};c.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)k(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};c.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)k(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)k(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return o.read(this,t,true,23,4)};c.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)k(t,4,this.length);return o.read(this,t,false,23,4)};c.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)k(t,8,this.length);return o.read(this,t,true,52,8)};c.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)k(t,8,this.length);return o.read(this,t,false,52,8)};function F(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0)}var s=1;var a=0;this[r]=t&255;while(++a<n&&(s*=256)){this[r+a]=t/s&255}return r+n};c.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0)}var s=n-1;var a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255}return r+n};c.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,255,0);this[r]=t&255;return r+1};c.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};c.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};c.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};c.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};c.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o)}var s=0;var a=1;var f=0;this[r]=t&255;while(++s<n&&(a*=256)){if(t<0&&f===0&&this[r+s-1]!==0){f=1}this[r+s]=(t/a>>0)-f&255}return r+n};c.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o)}var s=n-1;var a=1;var f=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&f===0&&this[r+s+1]!==0){f=1}this[r+s]=(t/a>>0)-f&255}return r+n};c.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};c.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};c.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};c.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};c.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function x(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(e,t,r,n,i){t=+t;r=r>>>0;if(!i){x(e,t,r,4,34028234663852886e22,-34028234663852886e22)}o.write(e,t,r,n,23,4);return r+4}c.prototype.writeFloatLE=function e(t,r,n){return H(this,t,r,true,n)};c.prototype.writeFloatBE=function e(t,r,n){return H(this,t,r,false,n)};function K(e,t,r,n,i){t=+t;r=r>>>0;if(!i){x(e,t,r,8,17976931348623157e292,-17976931348623157e292)}o.write(e,t,r,n,52,8);return r+8}c.prototype.writeDoubleLE=function e(t,r,n){return K(this,t,r,true,n)};c.prototype.writeDoubleBE=function e(t,r,n){return K(this,t,r,false,n)};c.prototype.copy=function e(t,r,n,i){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var o=i-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,i)}else if(this===t&&n<r&&r<i){for(var s=o-1;s>=0;--s){t[s+r]=this[s+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,i),r)}return o};c.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!c.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(t.length===1){var o=t.charCodeAt(0);if(i==="utf8"&&o<128||i==="latin1"){t=o}}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var s;if(typeof t==="number"){for(s=r;s<n;++s){this[s]=t}}else{var a=c.isBuffer(t)?t:new c(t,i);var f=a.length;if(f===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(s=0;s<n-r;++s){this[s+r]=a[s%f]}}return this};var G=/[^+/0-9A-Za-z-_]/g;function V(e){e=e.split("=")[0];e=e.trim().replace(G,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function X(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function Y(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var o=[];for(var s=0;s<n;++s){r=e.charCodeAt(s);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)o.push(239,191,189);continue}else if(s+1===n){if((t-=3)>-1)o.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)o.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)o.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return o}function j(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function J(e,t){var r,n,i;var o=[];for(var s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s);n=r>>8;i=r%256;o.push(i);o.push(n)}return o}function q(e){return i.toByteArray(V(e))}function z(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Q(e){return e instanceof ArrayBuffer||e!=null&&e.constructor!=null&&e.constructor.name==="ArrayBuffer"&&typeof e.byteLength==="number"}function Z(e){return e!==e}},{"base64-js":1,ieee754:3}],3:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s;var a=i*8-n-1;var f=(1<<a)-1;var u=f>>1;var h=-7;var l=r?i-1:0;var c=r?-1:1;var p=e[t+l];l+=c;o=p&(1<<-h)-1;p>>=-h;h+=a;for(;h>0;o=o*256+e[t+l],l+=c,h-=8){}s=o&(1<<-h)-1;o>>=-h;h+=n;for(;h>0;s=s*256+e[t+l],l+=c,h-=8){}if(o===0){o=1-u}else if(o===f){return s?NaN:(p?-1:1)*Infinity}else{s=s+Math.pow(2,n);o=o-u}return(p?-1:1)*s*Math.pow(2,o-n)};r.write=function(e,t,r,n,i,o){var s,a,f;var u=o*8-i-1;var h=(1<<u)-1;var l=h>>1;var c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:o-1;var g=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){a=isNaN(t)?1:0;s=h}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-s))<1){s--;f*=2}if(s+l>=1){t+=c/f}else{t+=c*Math.pow(2,1-l)}if(t*f>=2){s++;f/=2}if(s+l>=h){a=0;s=h}else if(s+l>=1){a=(t*f-1)*Math.pow(2,i);s=s+l}else{a=t*Math.pow(2,l-1)*Math.pow(2,i);s=0}}for(;i>=8;e[r+p]=a&255,p+=g,a/=256,i-=8){}s=s<<i|a;u+=i;for(;u>0;e[r+p]=s&255,p+=g,s/=256,u-=8){}e[r+p-g]|=d*128}},{}],4:[function(e,t,n){!function(e,t){if("function"==typeof i&&i.amd)i(["exports"],t);else if("undefined"!=typeof n)t(n);else{var r={};t(r),e.Hashids=r}}(this,function(e){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var n,i,o="";this.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.parseInt=function(e,t){return/^(-|\+)?([0-9]+|Infinity)$/.test(e)?parseInt(e,t):NaN},this.seps="cfhistuCFHISTU",this.minLength=0<parseInt(t,10)?t:0,this.salt="string"==typeof e?e:"","string"==typeof r&&(this.alphabet=r);for(var s=0;s!==this.alphabet.length;s++)-1===o.indexOf(this.alphabet.charAt(s))&&(o+=this.alphabet.charAt(s));if(this.alphabet=o,this.alphabet.length<16)throw"error: alphabet must contain at least X unique characters".replace("X",16);if(-1!==this.alphabet.search(" "))throw"error: alphabet cannot contain spaces";for(var a=0;a!==this.seps.length;a++){var f=this.alphabet.indexOf(this.seps.charAt(a));-1===f?this.seps=this.seps.substr(0,a)+" "+this.seps.substr(a+1):this.alphabet=this.alphabet.substr(0,f)+" "+this.alphabet.substr(f+1)}this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this._shuffle(this.seps,this.salt),(!this.seps.length||3.5<this.alphabet.length/this.seps.length)&&(n=Math.ceil(this.alphabet.length/3.5))>this.seps.length&&(i=n-this.seps.length,this.seps+=this.alphabet.substr(0,i),this.alphabet=this.alphabet.substr(i)),this.alphabet=this._shuffle(this.alphabet,this.salt);var u=Math.ceil(this.alphabet.length/12);this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}var e,t,r;return e=h,(t=[{key:"encode",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return"";if(t[0]&&t[0].constructor===Array&&!(t=t[0]).length)return"";for(var n=0;n!==t.length;n++)if(t[n]=this.parseInt(t[n],10),!(0<=t[n]))return"";return this._encode(t)}},{key:"decode",value:function(e){return e&&e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]}},{key:"encodeHex",value:function(e){if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(var t=e.match(/[\w\W]{1,12}/g),r=0;r!==t.length;r++)t[r]=parseInt("1"+t[r],16);return this.encode.apply(this,t)}},{key:"decodeHex",value:function(e){for(var t=[],r=this.decode(e),n=0;n!==r.length;n++)t+=r[n].toString(16).substr(1);return t}},{key:"_encode",value:function(e){for(var t,r=this.alphabet,n=0,i=0;i!==e.length;i++)n+=e[i]%(i+100);for(var o=t=r.charAt(n%r.length),s=0;s!==e.length;s++){var a=e[s],f=o+this.salt+r;r=this._shuffle(r,f.substr(0,r.length));var u=this._toAlphabet(a,r);if(t+=u,s+1<e.length){var h=(a%=u.charCodeAt(0)+s)%this.seps.length;t+=this.seps.charAt(h)}}if(t.length<this.minLength){var l=(n+t[0].charCodeAt(0))%this.guards.length,c=this.guards[l];(t=c+t).length<this.minLength&&(l=(n+t[2].charCodeAt(0))%this.guards.length,t+=c=this.guards[l])}for(var p=parseInt(r.length/2,10);t.length<this.minLength;){var g=(t=(r=this._shuffle(r,r)).substr(p)+t+r.substr(0,p)).length-this.minLength;0<g&&(t=t.substr(g/2,this.minLength))}return t}},{key:"_decode",value:function(e,t){var r=[],n=0,i=new RegExp("[".concat(this.escapeRegExp(this.guards),"]"),"g"),o=e.replace(i," "),s=o.split(" ");if(3!==s.length&&2!==s.length||(n=1),void 0!==(o=s[n])[0]){var a=o[0];o=o.substr(1),i=new RegExp("[".concat(this.escapeRegExp(this.seps),"]"),"g"),s=(o=o.replace(i," ")).split(" ");for(var f=0;f!==s.length;f++){var u=s[f],h=a+this.salt+t;t=this._shuffle(t,h.substr(0,t.length)),r.push(this._fromAlphabet(u,t))}this.encode(r)!==e&&(r=[])}return r}},{key:"_shuffle",value:function(e,t){var r;if(!t.length)return e;for(var n=(e=e.split("")).length-1,i=0,o=0,s=0;0<n;n--,i++){i%=t.length,o+=r=t.charCodeAt(i);var a=e[s=(r+i+o)%n];e[s]=e[n],e[n]=a}return e=e.join("")}},{key:"_toAlphabet",value:function(e,t){for(var r="";r=t.charAt(e%t.length)+r,e=parseInt(e/t.length,10););return r}},{key:"_fromAlphabet",value:function(e,r){return e.split("").map(function(e){return r.indexOf(e)}).reduce(function(e,t){return e*r.length+t},0)}}])&&n(e.prototype,t),r&&n(e,r),h}();e.default=t})},{}],5:[function(e,t,r){var a=e("./utils");var f={UNKNOW:"UNKNOW",PING:"PING",HEART_BEAT:"HEART_BEAT",SERVERMODE:"servermode",CHECK:"check",LOGIN:"login",LOGOUT:"logout",SERVERS:"servers",GET_FTPMODE:"GET_FTPMODE",UPLOAD:"upload",DOWNLOAD:"download",DOWNLOADTO:"downloadto",LS:"list",MV:"mv",RM:"remove",RN:"rename",MKDIR:"create_folder",GET_TRANS_COUNT:"get_trans_count",OPEN_TRANS_LIST:"open_trans_list",START_UPDATE:"start_update",CREATEURL:"CREATEURL",SETURLCONF:"SETURLCONF",GETURLINFO:"GETURLINFO",CHECKURL:"CHECKURL",CHECKPASSWD:"CHECKPASSWD",MANUAL_TRANSFER:"MANUAL_TRANSFER"};var u={UNKNOW:"UNKNOW",PING:"PING",HEART_BEAT:"HEART_BEAT",SERVERMODE:"servermode",CHECK:"check_response",LOGIN:"login_response",LOGOUT:"logout_response",SERVERS:"servers_response",GET_FTPMODE:"GET_FTPMODE",UPLOAD:"upload_response",DOWNLOAD:"download_response",DOWNLOADTO:"downloadto_response",LS:"list_response",MV:"mv",RM:"remove_response",RN:"rename_response",MKDIR:"create_folder_response",GET_TRANS_COUNT:"get_trans_count_response",TASK_COUNT:"task_count",START_UPDATE:"start_update_response",UPDATE_CLIENT:"download_update_file_response",DISCONNECT:"disconnect",CREATEURL:"createurl",SETURLCONF:"seturlconf",GETURLINFO:"geturkinfo",CHECKURL:"chechurl",CHECKPASSWD:"checkpasswd"};var n={ProtoVersion:1};var i={EMPTY:"EMPTY",WEBSRV:"WEBSRV",WEBUI:"WEBUI",WEBADMIN:"WEBADMIN",PROXYC:"PROXYC",PROXYS:"PROXYS",FTP_CLIENT:"FTP_CLIENT",FTP_SERVER:"FTP_SERVER",TYPHOON_CLIENT:"TYPHOON_CLIENT",TYPHOON_SERVER:"TYPHOON_SERVER"};var h={OK:0,WS_UNKNOW:1e3,WS_DBUNKNOW:1001,WS_ACCOUNTINVALID:1002,WS_ACCOUNTREQUIRED:1003,WS_ACCOUNTDUPLICATE:1004,WS_PASSWORDINVALID:1005,WS_PASSWORDREQUIRED:1006,WS_SERVERINVALID:1007,WS_ASSIGNINVALID:1008,WS_TOKENINVALID:1009,WS_IDINVALID:1010,WS_PBMARSHALANY:1011,WS_PBMARSHAL:1012,WS_PBUNMARSHAL:1013,WS_EMAILDUPLICATE:1014,WS_SERVERDEVICEREQUIRED:1015,WS_SERVERDEVICEDUPLICATE:1016,WS_ASSIGNDUPLICATE:1017,WS_ACCOUNTNOTALLOWED:1018,WS_ILLEGALOPERATION:1019,WS_INCORRECTACCOUNTFORMAT:1021,WS_INCORRECTEMAILFORMAT:1022,WS_INCORRECTPASSWORDFORMAT:1023,WS_INCORRECTNAMEFORMAT:1024,WS_INCORRECTPHONEFORMAT:1025,WS_INCORRECTHOSTFORMAT:1026,WS_INVALIDPORT:1027,WS_INVALIDTCPPORT:1028,WS_INVALIDUDPPORT:1029,WS_INVALIDBANDWIDTH:1030,WS_SITEACCESSDENIED:1031,WS_ONLYONEADMIN:1032,WS_DIRNOTEXIST:1033,WS_FILENOTEXIST:1034,WS_CMDFAILD:1035,WS_INVALIDPACKAGESIZE:1036,WS_DOESNOTEXIST:1037,WS_INCORRECTLICENSEFORMAT:1038,WS_CREATEUSERERROR:1039,WS_NOTFOUNDNETCARD:1040,WS_URLBROKEN:1041,WS_NOPERMISSION:1042,WS_PATHNOTEXIST:1043,WS_NOREADPERMISSION:1044,WS_NOWRITEPERMISSION:1045,WS_ILLEGAL:1046,WS_InvalidServerEmailAccount:1047,WS_InvalidServerEmailPassword:1048,WS_InvalidSmtpHostOrPort:1049,FC_UNKNOW:2e3,FC_FTPLOGIN:2001,FC_FTPLIST:2002,FC_FTPSERVERCLOSED:2003,FC_FTPSERVERNORUN:2004,FC_FTPSERVERDISC:2005,FC_OTHERUSERLOGIN:2006,FC_DIRNOTEXIST:2007,FC_FTPLOGING:2008,FC_CONNECTFAILD:2009,FC_MKDNOPERMISSION:2010,FC_CWDNOPERMISSION:2011,FC_RECONNECT:2012,FC_FTPCLIENTDISC:2013,FC_PARAMERR:2014,FC_AUTHFAILED:2015,FC_UPLOADRECURSIVING:2016,ERROR_PROXY_TIMEOUT:3e4,ERROR_CLIENT_CLOSED:30001,ERROR_CLIENT_TIMEOUT:30002,ERROR_MANAGER_ERROR:30003,ERROR_NOT_LOGIN_INFO:30004,ERROR_FAILED_TO_START_PROGRM:30005};var o={FILE:0,DIRECTORY:1,SYMLINK_FILE:2,SYMLINK_DIRECTORY:3,SYMLINK_UNKNOWN:4,IS_DIR:true};var s={FILES:0,DIRECTORIES:1};var l=function(){function e(){var r=this;this.promise=new Promise(function(e,t){r.resolve=e;r.reject=t})}return e}();function c(){this.handlers={}}c.prototype={addEventListener:function(e,t){if(typeof this.handlers[e]=="undefined"){this.handlers[e]=[]}this.handlers[e].push(t)},emit:function(e){if(!e.target){e.target=this}if(this.handlers[e.type]instanceof Array){var t=this.handlers[e.type];for(var r=0;r<t.length;r++){t[r](e.data)}}}};function p(o){var s=this;this.proxyHost=o.proxyHost;this.ports=[9527,19527,29527];this.failedPorts=[];this.lang="zh-CN";var e,t,r;this.obserable=new c;this.ifWebsocket=function(){if(typeof WebSocket=="undefined"){return false}else{return true}};this.login=function(r,n,e){s.lang=e||"zh-CN";var t={id:parseInt(String((new Date).getTime()/1e3),0),version:"3.0.3.8",device:"",module:"WEBUI",action:"login",UK:a.encodeHash(r)+a.encodeHash(n)};var i=JSON.stringify(t);a.http.post(o.webServer,i).then(function(e){var t=JSON.parse(e.data);if(t.result===0){sessionStorage.setItem("token",a.encodeHash(r)+a.encodeHash(n)+t.token);sessionStorage.setItem("protocol_version",t.protocol_version);sessionStorage.setItem("client_version",t.client_version);s.client_version=t.client_version;s.protocol_version=t.protocol_version;s.createWebSocket()}else{}})};this.createWebSocket=function(){var t=[];s.failedPorts=[];s.ports.forEach(function(e){t.push(s.registerSocket("wss://localhost.raysync.io:"+e))});Promise.race(t).then(function(){}).catch(function(){setTimeout(s.createWebSocket(),300);s.obserable.emit({type:"WEBSOCKET",data:{type:"WEBSOCKET",result:0,message:"webSocket error:failed connect to raysync client",body:""}})})};this.registerSocket=function(t,e,r){var n=new l;if(!s.ifWebsocket()){return}var i=new WebSocket(t);i.onopen=function(){n.resolve(t.slice(t.indexOf("io:")+3,t.length));if(i.readyState===1){var e=JSON.stringify({action:f.CHECK,sign:"yunyu",protocol_version:s.protocol_version||sessionStorage.protocol_version,client_version:s.client_version||sessionStorage.client_version});i.send(e);s.checkTimeOut=setTimeout(function(){s.failedPorts.push(t.slice(t.indexOf("io:")+3,t.length));s.failedPorts=Array.from(new Set(s.failedPorts));if(s.failedPorts.length===s.ports.length){s.createWebSocket();s.obserable.emit({type:"WEBSOCKET",data:{type:"WEBSOCKET",result:1,message:"webSocket error:failed connect to raysync client",body:""}});console.log("webSocket error:failed connect to raysync client")}},3e3)}};i.onerror=function(){s.failedPorts.push(t.slice(t.indexOf("io:")+3,t.length));s.failedPorts=Array.from(new Set(s.failedPorts));if(s.failedPorts.length===s.ports.length){n.reject("close")}};i.onmessage=function(e){a.readBolbData(e).then(function(e){var t=JSON.parse(e);if(t.action.toLowerCase()===u.LOGIN){if(t.result!==0){s.obserable.emit({type:"LOGIN",data:{type:"loginRaysync",result:t.result,message:"loginRaysync error",body:""}});console.log("login Raysync error")}else{s.obserable.emit({type:"LOGIN",data:{type:"loginRaysync",result:t.result,message:"loginRaysync success",body:""}})}}else if(t.action.toLowerCase()===u.CHECK){if(t.sign.toLowerCase()==="raysync"){s.websocket=i;s.websocket.onclose=function(){s.websocket.onclose=null;s.websocket=null;s.createWebSocket()};s.obserable.emit({type:"webSocket",data:{type:"webSocket",result:0,message:"seccess:connected to raysync client",body:""}});clearTimeout(s.checkTimeOut);s.getServers()}else{}}else if(t.action.toLowerCase()===u.LS){var r=[],n="";if(t.result===h.OK){r=t.list||[];n=t.path;s.obserable.emit({type:"LS",data:{result:t.result,type:"LS",LS:r,Dir:n,message:"get file list success"}})}else{s.obserable.emit({type:"LS",data:{result:t.result,type:"LS",LS:r,Dir:n,message:"get file list Failed"}})}}else if(t.action.toLowerCase()===u.TASK_COUNT){s.obserable.emit({type:"TASK_COUNT",data:{result:t.result,type:"TASK_COUNT",count:t.count,message:"TASK_COUNT"}})}else if(t.action.toLowerCase()===u.UPDATE_CLIENT){s.obserable.emit({type:"UPDATE_CLIENT",data:{result:t.result,type:"UPDATE_CLIENT",count:t.version,message:"UPDATE_CLIENT"}})}else if(t.action.toLowerCase()===u.START_UPDATE){if(t.result!==0){s.obserable.emit({type:"START_UPDATE",data:{result:t.result,type:"START_UPDATE",message:"START_UPDATE Failed"}})}}else if(t.action.toLowerCase()===u.DISCONNECT){s.obserable.emit({type:"DISCONNECT",data:{result:t.result,type:"DISCONNECT",message:"DISCONNECT TO RAYSYNC SERVER"}})}else if(t.action.toLowerCase()===u.MKDIR){s.obserable.emit({type:"MKDIR",data:{result:t.result,type:"MKDIR",message:"MKDIR RESULT"}})}else if(t.action.toLowerCase()===u.GET_TRANS_COUNT){s.obserable.emit({type:"GET_TRANS_COUNT",data:{result:t.result,count:t.count,type:"GET_TRANS_COUNT",message:"GET_TRANS_COUNT"}})}else if(t.action.toLowerCase()===u.RN){s.obserable.emit({type:"RENAME",data:{result:t.result,type:"rename",message:"rename"}})}else if(t.action.toLowerCase()===u.RM){if(t.result===h.WS_NOPERMISSION){s.obserable.emit({type:"REMOVE",data:{result:t.result,type:"remove",message:"NOPERMISSION"}})}}})};return n.promise};this.getServers=function(){var e=new l;var t=JSON.stringify({id:parseInt(String((new Date).getTime()/1e3),0),version:n.ProtoVersion,device:"",module:i.WEBUI,action:f.SERVERS,token:sessionStorage.getItem("token").substr(-40)});a.http.post(o.webServer,t).then(function(e){var t=JSON.parse(e.data);if(t.result===h.OK){var r=JSON.parse(t.servers[0]);s.loginRequest(r)}else{console.log("error:Get server info error;error code:"+t.result)}})};this.loginRequest=function(e){var t=JSON.stringify({is_ftps:e.encryption?true:false,action:f.LOGIN,server_ip:s.proxyHost||e.host||window.location.hostname,server_port:e.port,proxy_ip:s.proxyHost||window.location.hostname||e.proxyHost,proxy_port:e.proxyPort,uk:sessionStorage.getItem("token").substr(0,128),language:s.lang||"zh-CN"});s.addWebSocket(t).then(function(){}).catch(function(){})};this.addWebSocket=function(e){var t=new l;if(!this.websocket||this.websocket.readyState!==1){this.obserable.emit({type:"WEBSOCKETERROR"});return t.promise}if(this.websocket.readyState===1){this.websocket.send(e);t.resolve("websocket do sent data")}else{this.createWebSocket()}return t.promise};this.getFileList=function(e){var t=JSON.stringify({action:f.LS,path:e});this.addWebSocket(t).catch(function(){})};this.upload=function(e,t){var r=JSON.stringify({action:f.UPLOAD,type:e,path:t});this.addWebSocket(r).catch(function(){})};this.manualTransfer=function(e,t){var r=JSON.stringify({action:f.MANUAL_TRANSFER,type:e,name:t});this.addWebSocket(r).catch(function(){})};this.download=function(e){var t=JSON.stringify({action:f.DOWNLOAD,src:e});this.addWebSocket(t).catch(function(){})};this.remove=function(e){var t=JSON.stringify({action:f.RM,path:e});this.addWebSocket(t).catch(function(){})};this.logout=function(){this.normalClose=true;var e=JSON.stringify({action:f.LOGOUT});this.addWebSocket(e)};this.mkdir=function(e,t){var r=JSON.stringify({action:f.MKDIR,name:e,remote_path:t});return this.addWebSocket(r)};this.rename=function(e,t){var r=JSON.stringify({action:f.RN,old_name:e,new_name:t});this.addWebSocket(r)};this.getTransCount=function(){var e=JSON.stringify({action:f.GET_TRANS_COUNT});this.addWebSocket(e)};this.showTransferList=function(e,t){var r=JSON.stringify({action:f.OPEN_TRANS_LIST,x:0,y:0});this.addWebSocket(r)};this.startUpdate=function(){var e=JSON.stringify({action:f.START_UPDATE,version:"0.0.0.1"});this.addWebSocket(e)}}t.exports=p},{"./utils":6}],6:[function(e,t,r){(function(i){var o=e("hashids").default;t.exports={readBolbData:function(i){var e=new Promise(function(t){if(i.data instanceof Blob){var e=i.data;var r=e.slice(0,i.data.size);var n=new FileReader;n.readAsText(r);n.onload=function(e){if(e.target.readyState==FileReader.DONE){t(e.target.result)}}}});return e},parseResponse:function(t){var e=new Promise(function(e){e(JSON.parse(t))});return e},encodeHash:function(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";var r=new o("eXVueXU=",64,t);var n=i(e).toString("hex");return r.encodeHex(n)},decodeHash:function(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";var r=new o("eXVueXU=",64,t);return i(r.decodeHex(e),"hex").toString("utf8")},http:{post:function(t,i){var e=new Promise(function(r,e){var n;if(window.ActiveXObject){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){n=false}}}else if(window.XMLHttpRequest){n=new XMLHttpRequest}n.open("POST",t,true);n.send(i);n.onreadystatechange=function(){var e={};if(n.readyState==4){if(n.status==200){var t=n.responseText;e.status=1;e.data=t;r(e)}}}});return e},get:function(t,i){var e=new Promise(function(r,e){var n;if(window.ActiveXObject){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){n=false}}}else if(window.XMLHttpRequest){n=new XMLHttpRequest}n.open("GET",t,true);n.setRequestHeader("Content-Type","application/octet-stream");n.send(i);n.onreadystatechange=function(){var e={};if(n.readyState==4){if(n.status==200){var t=n.responseText;e.status=1;e.data=t;r(e)}}}});return e}}}}).call(this,e("buffer").Buffer)},{buffer:2,hashids:4}]},{},[5])(5)});